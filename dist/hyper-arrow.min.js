let p="length",u=Object,t=Proxy,v=Error,l=document,a=Array.isArray,d=e=>e.slice(1),m=e=>e.toLowerCase(),f=(e,t,r)=>e.setAttribute(t,r),y=(e,t)=>e.removeAttribute(t),h=0,g=1,E=1,w=2,x=3,b=4,s=5,n=1,i=null,$=new Map,r="__hyper_arrow__",o=Symbol(r),c=e=>!!e[o],z=0,B="uid",_="oncreate",N="cacheRemovedChildren",D={html:"http://www.w3.org/1999/xhtml",svg:"http://www.w3.org/2000/svg",mathml:"http://www.w3.org/1998/Math/MathML"},P={defaultValue:"value",htmlFor:"for",className:"class"};var e=new t({},{get:(e,r)=>new t({},{get:(e,t)=>A.bind(null,r+":"+t)})});function M(){}function A(e,...t){var[e,r]=e.split(":"),[e,r]=r?[e,r]:[r,"html"];if("html"!==e&&"svg"!==e&&"mathml"!==e)throw v(`wrong tag type '${e}'. 'html', 'svg' or 'mathml' required`);var n,o=[e,r,u.create(null),[]],e=(u.setPrototypeOf(o,M.prototype),"object"==typeof t[0]&&!a(t[0])),[i,r]=e?[t[0],d(t)]:[{},t];for(n in i)n.startsWith("on")?o[w][m(n)]=i[n]:o[w][n]=C(i[n],o,n);var l=C(a(r)&&1===r[p]&&("function"==typeof r[0]||a(r[0]))?r[0]:r,o,null);if("function"==typeof l||"string"==typeof l||l instanceof M)o[x].push(O(C(l,o,0)));else for(var f in l)o[x].push(O(C(l[f],o,+f)));return o}function O(e){return"string"==typeof e?["text",e,{},[]]:e}function F(e,t){l.querySelector(e).append(R(t)[b])}function R(e){var t,r,n,o=l.createElementNS(D[e[h]],e[g]);for(n in f(o,B,z+++""),e[w])q(o,n,e[w][n]);o.append(...e[x].map(H).map(e=>e[b]));var i=S(e,o);return null!=(r=(t=i[w])[_])&&r.call(t,o),i}function H(e){return"text"===e[h]?(t=e,r=l.createTextNode(t[E]),t=S(t,r)):R(e);var t,r}function S(e,t){return e[b]=t,e[w][N]&&k(e[x])&&(e[s]={}),t[r]=e}function I(t,e){return C(t,null,null,e),()=>{for(var e of $.keys())e[0]===t&&$.delete(e)}}function C(e,t,r,n){var o;return"function"!=typeof e?e:(o=t,i=t?[e,o,r]:[e,null,null,n],t=e(),i=null,t)}function V(e){return e!==u(e)||c(e)?e:new t(e,{get(t,r){var e,n;return r===o||(e=Reflect.get(t,r),"function"==typeof t&&"prototype"===r?e:(i&&($.has(i)||$.set(i,[]),(n=$.get(i)).some(e=>e[0]===t&&e[1]===r)||n.push([t,r])),V(e)))},set(e,t,r){var n,o,i,l,f=Reflect.get(e,t),u=Reflect.set(e,t,r);if(f!==r||t===p)for(var[a,s]of $.entries())for(var c of s)c[0]===f&&(c[0]=r),c[0]===e&&c[1]===t&&([c,n,o,i]=a,c=c(),n?"number"==typeof o||null===o&&("string"==typeof c||c instanceof M)?(l=null!=o?o:0,W(n[x][l]),L(n,l,O(c))):null===o?(n[x].map(W),G(n,c.map(O))):q(n[b],o,c):null!=i&&i(c));return u}})}function W(e){var t,r;for(r of $.keys())r[n]&&e[b].contains(null==(t=r[n])?void 0:t[b])&&$.delete(r)}function G(r,n){var t=k(r[x]),o=k(n);if(t&&o){for(let e=t[p]-1;0<=e;e--)o.includes(t[e])||j(r,e);for(let[e,t]of o.entries()){var i=r[x].findIndex(e=>e[w].id===t),l=n[e];(e===i?L:r[x][i]?(T(r,e,j(r,i)),L):null!=(i=r[s])&&i[t]?(T(r,e,r[s][t]),L):T)(r,e,l)}}else{var f=n[p],u=r[x][p];for(let e=0;e<f||e<u;e++)e<f&&e<u?L(r,e,n[e]):e>=u?T(r,e,n[e]):j(r,u+f-1-e)}}function L(e,t,r){var n=e[x][t];if("text"!==n[h]&&"text"!==r[h]&&n[g]===r[g]){var o,i,l=n[b];for(o in r[w])n[w][o]!==r[w][o]&&q(l,o,r[w][o]);for(i in n[w])if(!(i in r[w])){s=a=u=f=void 0;var f=l,u=i;if(m(u)in f.attributes)y(f,u);else if(u in P)y(f,P[u]);else if(u in f)f[u]="string"==typeof f[u]?"":void 0;else{var a=u[0],s=d(u);if("_"===a)y(f,s);else{if("$"!==a)throw v(`invalid prop '${u}' to unset from <${f.nodeName}>`);f.style.removeProperty(s)}}}["innerText","innerHTML","textContent"].some(e=>e in r[w])||G(n,r[x]);var c=S(r,n[b]);e[x][t]=c}else j(e,t),T(e,t,r)}function T(e,t,r){var n=e[b],r=r[b]?r:H(r),o=r[b];n.insertBefore(o,n.childNodes.item(t)),e[x].splice(t,0,r),e[s]&&"string"==typeof r[w].id&&delete e[s][r[w].id]}function j(e,t){t=e[x].splice(t,1)[0];return t[b].remove(),e[s]&&"string"==typeof t[w].id&&(e[s][t[w].id]=t),t}function k(e){var t=e.map(e=>e[w].id).filter(e=>"string"==typeof e);if(new Set(t).size!==t[p])throw v("duplicate children id: "+t);return t[p]===e[p]?t:null}function q(e,t,r){if(![_,N].includes(t))if(function e(t,r){if(!(r in t))return[];let n=u.getOwnPropertyDescriptor(t,r);if(n)return u.entries(n).map(([e,t])=>t?e:null).filter(e=>e);let o=u.getPrototypeOf(t);if(!o)return[];return e(o,r)}(e,t).includes("set"))e[t]=r;else{if("string"!=typeof r)throw v(`<${e.nodeName}> attr/style must be string: ${t} = `+r);"$"===t[0]?e.style.setProperty(d(t),r):"_"===t[0]?f(e,d(t),r):f(e,t,r)}}export{$ as deps,c as isReactive,e as tags,A as h,F as mount,I as watch,V as reactive};