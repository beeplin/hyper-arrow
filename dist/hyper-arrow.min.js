let p="length",u=Object,v=Error,t=Proxy,d=Reflect,l=document,s=Array.isArray,y=e=>e.slice(1),m=e=>e.toLowerCase(),f=(e,t,n)=>e.setAttribute(t,n),h=(e,t)=>e.removeAttribute(t),g=0,w=1,q=1,x=2,b=3,N=4,a=5,r=1,o=null,_=new Map,n="__hyper_arrow__",i=Symbol(n),c=e=>!!e[i],z=0,B="uid",$="oncreate",M="cacheRemovedChildren",P={defaultValue:"value",htmlFor:"for",className:"class"};var e=new t({},{get:(e,n)=>new t({},{get:(e,t)=>function(e,t,...n){var r=new S(e,t,u.create(null),[]),[i,e]="object"!=typeof n[0]||s(n[0])||n[0]instanceof S?[{},n]:[n[0],y(n)];for(var o in i)o.startsWith("on")?r[x][m(o)]=i[o]:r[x][o]=L(i[o],r,o);var t=s(e)&&1===e[p]&&("function"==typeof e[0]||s(e[0]))?e[0]:e,l=L(t,r,null);if("function"==typeof l||"string"==typeof l||l instanceof S)r[b].push(A(L(l,r,0)));else for(var f in l)r[b].push(A(L(l[f],r,+f)));return r}.bind(null,n,t)})});function S(e,t,n,r){this[g]=e,this[w]=t,this[x]=n,this[b]=r}function A(e){return"string"==typeof e?["text",e,{},[]]:e}function D(e,t){l.querySelector(e).append(E(t)[N])}function E(e){var t,n,r,i="html"===e[g]?l.createElement(e[w]):"svg"===e[g]?l.createElementNS("http://www.w3.org/2000/svg",e[w]):l.createElementNS("http://www.w3.org/1998/Math/MathML",e[w]);for(r in f(i,B,z+++""),e[x])R(i,r,e[x][r]);i.append(...e[b].map(F).map(e=>e[N]));var o=C(e,i);return null!=(n=(t=o[x])[$])&&n.call(t,i),o}function F(e){return"text"===e[g]?(t=e,n=l.createTextNode(t[q]),t=C(t,n)):E(e);var t,n}function C(e,t){return e[N]=t,e[x][M]&&k(e[b])&&(e[a]={}),t[n]=e}function H(t,e){return L(t,null,null,e),()=>{for(var e of _.keys())e[0]===t&&_.delete(e)}}function L(e,t,n,r){var i;return"function"!=typeof e?e:(i=t,o=t?[e,i,n]:[e,null,null,r],t=e(),o=null,t)}function I(e){return e!==u(e)||c(e)?e:new t(e,{get(t,n){var e,r;return n===i||(e=d.get(t,n),"function"==typeof t&&"prototype"===n?e:(o&&(_.has(o)||_.set(o,[]),(r=_.get(o)).some(e=>e[0]===t&&e[1]===n)||r.push([t,n])),I(e)))},set(e,t,n){var r,i,o,l,f=d.get(e,t),u=d.set(e,t,n);if(f!==n||t===p)for(var[s,a]of _.entries())for(var c of a)c[0]===f&&(c[0]=n),c[0]===e&&c[1]===t&&([c,r,i,o]=s,c=c(),r?"number"==typeof i||null===i&&("string"==typeof c||c instanceof S)?(l=null!=i?i:0,V(r[b][l]),O(r,l,A(c))):null===i?(r[b].map(V),W(r,c.map(A))):R(r[N],i,c):null!=o&&o(c));return u}})}function V(e){var t,n;for(n of _.keys())n[r]&&e[N].contains(null==(t=n[r])?void 0:t[N])&&_.delete(n)}function W(n,r){var t=k(n[b]),i=k(r);if(t&&i){for(let e=t[p]-1;0<=e;e--)i.includes(t[e])||j(n,e);for(let[e,t]of i.entries()){var o=n[b].findIndex(e=>e[x].id===t),l=r[e];(e===o?O:n[b][o]?(T(n,e,j(n,o)),O):null!=(o=n[a])&&o[t]?(T(n,e,n[a][t]),O):T)(n,e,l)}}else{var f=r[p],u=n[b][p];for(let e=0;e<f||e<u;e++)e<f&&e<u?O(n,e,r[e]):e>=u?T(n,e,r[e]):j(n,u+f-1-e)}}function O(e,t,n){var r=e[b][t];if("text"!==r[g]&&"text"!==n[g]&&r[w]===n[w]){var i,o,l=r[N];for(i in n[x])r[x][i]!==n[x][i]&&R(l,i,n[x][i]);for(o in r[x])if(!(o in n[x])){a=s=u=f=void 0;var f=l,u=o;if(m(u)in f.attributes)h(f,u);else if(u in P)h(f,P[u]);else if(u in f)f[u]="string"==typeof f[u]?"":void 0;else{var s=u[0],a=y(u);if("_"===s)h(f,a);else{if("$"!==s)throw v(`invalid prop '${u}' to unset from <${f.nodeName}>`);f.style.removeProperty(a)}}}["innerText","innerHTML","textContent"].some(e=>e in n[x])||W(r,n[b]);var c=C(n,r[N]);e[b][t]=c}else j(e,t),T(e,t,n)}function T(e,t,n){var r=e[N],n=n[N]?n:F(n),i=n[N];r.insertBefore(i,r.childNodes.item(t)),e[b].splice(t,0,n),e[a]&&"string"==typeof n[x].id&&delete e[a][n[x].id]}function j(e,t){t=e[b].splice(t,1)[0];return t[N].remove(),e[a]&&"string"==typeof t[x].id&&(e[a][t[x].id]=t),t}function k(e){var t=e.map(e=>e[x].id).filter(e=>"string"==typeof e);if(new Set(t).size!==t[p])throw v("duplicate children id: "+t);return t[p]===e[p]?t:null}function R(e,t,n){if(![$,M].includes(t))if(function e(t,n){if(!(n in t))return[];let r=u.getOwnPropertyDescriptor(t,n);if(r)return u.entries(r).map(([e,t])=>t?e:null).filter(e=>e);let i=u.getPrototypeOf(t);if(!i)return[];return e(i,n)}(e,t).includes("set"))e[t]=n;else{if("string"!=typeof n)throw v(`<${e.nodeName}> attr/style must be string: ${t} = `+n);"$"===t[0]?e.style.setProperty(y(t),n):"_"===t[0]?f(e,y(t),n):f(e,t,n)}}export{_ as deps,c as isReactive,e as tags,S as VEl,D as mount,H as watch,I as reactive};