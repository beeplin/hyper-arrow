let o=Symbol("brand"),l=document.createElement("a"),i=null,g=new Map;function r(e,t,r){var n=[e,Object.create(null),[],l];if("object"!=typeof t||Array.isArray(t))r=t;else for(var o in t)n[1][o]=o.startsWith("on")?t[o]:s(t[o],n,o);var i,f=s(r,n)??[];for(i in f)n[2].push(s(f[i],n,"#"+i));return n}var e=new Proxy({},{get:(e,t)=>r.bind(null,t)});function t(e,t){document.querySelector(e).append(u(t))}function n(t,e){return s(t,void 0,void 0,e),()=>{for(var e of g.keys())e[0]===t&&g.delete(e)}}function f(e){return e!==Object(e)||a(e)?e:new Proxy(e,{get(e,t){var r,n;return t===o||(r=Reflect.get(e,t),"function"==typeof e&&"prototype"===t?r:(i&&(g.has(i)||g.set(i,[]),(n=g.get(i)).some(e=>e[0]===e&&e[1]===t)||n.push([e,t])),f(r)))},set(e,t,r){var n=Reflect.get(e,t),o=Reflect.set(e,t,r);if(!Object.is(n,r)||"length"===t)for(var[i,f]of g.entries())for(var l of f)if(l[0]===n&&(l[0]=r),l[0]===e&&l[1]===t){var a,s,u,c,[l,d,p,v]=i,l=l();if(d)if(p)"#"===p[0]?(u=+p.slice(1),h(d[2][u]),b(d,u,l)):(c=s=a=u=void 0,a=p,s=l,[,u,,c]=u=d,u[a]!==s&&C(c,a,u[a]=s));else{for(var y of d[2])h(y);m(d,l)}else v&&v(l)}return o}})}let a=e=>!!e[o];function s(e,t,r,n){if("function"!=typeof e)return e;i=t?[e,t,r]:[e,,,n];t=e();return i=null,t}function u(e){if("string"==typeof e)return document.createTextNode(e);var t,[r,n,o]=e,i=document.createElement(r);for(t in(e[3]=i).dataset.id=Math.random().toString().slice(2,5),i.append(...o.map(u)),n)C(i,t,n[t]);return i}function h(e){if("string"!=typeof e)for(var t of g.keys())!function t(e,r){if("string"==typeof e||void 0===r)return!1;if(e===r)return!0;let n=e[2].some(e=>t(e,r));return n}(e,t[1])||g.delete(t)}function m(e,t){var r,[,,n,o]=e;for(r in t)+r<n.length?b(e,+r,t[r]):o.append(u(t[r]));for(let e=t.length;e<n.length;e++)o.removeChild(o.lastChild);e[2]=t}function b(e,t,r){var n,o,i=e[2][t];if("string"!=typeof i&&"string"!=typeof r&&i[0]===r[0]){var f,[,l,,a]=i;let[,t,e]=r;for(f in r[3]=a,t)t[f]!==l[f]&&C(a,f,t[f]);for(let e in l)e in t||(n=a,"$"===(o=e)[0]?n.style[o.slice(1)]=null:"_"===o[0]||o.toLowerCase()in n.attributes?n.removeAttribute(o.replace(/^_/,"").toLowerCase()):n[o]=void 0);["innerText","textContent"].some(e=>e in t)||m(i,e)}else e[3].replaceChild(u(r),e[3].childNodes[t]);e[2][t]=r}function C(e,t,r){"$"===(t="class"!==t&&"for"!==t?t:"_"+t)[0]?e.style[t.slice(1)]=r:"_"===t[0]?e.setAttribute(t.slice(1),r):t.startsWith("on")?e[t.toLowerCase()]=r:e[t]=r}export{g as deps,r as h,e as tags,t as mount,n as watch,f as reactive,a as isReactive};