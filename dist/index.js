let i=Symbol("brand"),f=null,y=new Map;function a(e,t,r){if("function"!=typeof e)return e;f=[e,t,r];t=e();return f=null,t}function r(e,t,r){var n,o=[e,Object.create(null),[]];if("object"!=typeof t||Array.isArray(t))r=t;else for(var i in t)o[1][i]=i.startsWith("on")?t[i]:a(t[i],o,i);for(n in a(r??[],o,"*"))o[2].push(a(r[n],o,"#"+n));return o}var e=new Proxy({},{get:(e,t)=>r.bind(null,t)});function t(t,e){return f=[t,,,e],t(),f=null,()=>{for(var e of y.keys())e[0]===t&&y.delete(e)}}function l(e){return e!==Object(e)||n(e)?e:new Proxy(e,{get(e,t){var r,n,o;return t===i||(r=Reflect.get(e,t),"function"==typeof e&&"prototype"===t?r:([n,o]=[[e,t]][0],f&&(y.has(f)||y.set(f,[]),(e=y.get(f)).some(e=>e[0]===n&&e[1]===o)||e.push([n,o])),l(r)))},set(e,t,r){var n,o,i,f=Reflect.get(e,t),a=Reflect.set(e,t,r),l=e,s=t,u=f,c=r;if(u!==c||"length"===s)for(var[p,d]of y.entries())for(var v of d)v[0]===u&&(v[0]=c),v[0]===l&&v[1]===s&&([v,n,o,i]=p,v=v(),n?"*"===o?((e,t)=>{for(var r of e[2])"string"!=typeof r&&h(r);e[3].replaceChildren(...t.map(g))})(n,v):"#"===o[0]?((i,f,a)=>{var l=i[2][f];if(i[2][f]=a,"string"!=typeof l&&h(l),"string"==typeof l||"string"==typeof a||l[0]!==a[0])i[3].replaceChild(g(a),i[3].childNodes[f]);else{var s,u,i=a;let[,e,t,r]=f=l,[,n,o]=i;for(s in i[3]=r,n)n[s]!==e[s]&&m(r,s,n[s]);for(u in e)if(!(u in n)){c=void 0;p=void 0;var c=r;var p=u;"$"===p[0]?c.style[p.slice(1)]=null:"_"===p[0]||p.toLowerCase()in c.attributes?c.removeAttribute(p.replace(/^_/,"").toLowerCase()):c[p]=void 0}if(!["innerText","textContent"].some(e=>e in n)){var d,f=r,i=t,a=o;for(d of i)"string"!=typeof d&&h(d);f.replaceChildren(...a.map(g))}}})(n,+o.slice(1),v):((e,t,r)=>{var[,e,,n]=e;e[t]!==r&&m(n,t,e[t]=r)})(n,o,v):i&&i(v));return a}})}let n=e=>!!e[i];function o(e,t){document.querySelector(e).append(g(t))}function g(e){if("string"==typeof e)return document.createTextNode(e);var t,[r,n,o]=e,i=document.createElement(r);for(t in(e[3]=i).dataset.id=Math.random().toString().slice(2,6),i.append(...o.map(g)),n)m(i,t,n[t]);return i}function m(e,t,r){"$"===(t="class"!==t&&"for"!==t?t:"_"+t)[0]?e.style[t.slice(1)]=r:"_"===t[0]?e.setAttribute(t.slice(1),r):t.startsWith("on")?e[t.toLowerCase()]=r:e[t]=r}function h(e){for(var t of y.keys())!function t(e,r){if(e===r)return!0;return e[2].filter(e=>"string"!=typeof e).some(e=>t(e,r))}(e,t[1])||y.delete(t)}export{y as deps,r as h,e as tags,t as watch,l as reactive,n as isReactive,o as mount};