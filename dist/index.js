let[y,v]=["object","function"],[p,h,b,m,A,g,j]=[0,1,2,3,4,5,6],n=Symbol("brand"),x=(e,r)=>typeof e===r,N=(e,r,t)=>e[0]===r&&e[1]===t,k=e=>x(e,y)&&!Array.isArray(e)&&!(e instanceof Node),w=e=>Array.isArray(e)?e:[e],s=null,C=new Map;function O(e,r,t,l){if(!x(e,v))return e;s={fn:e,at:r,el:t,x:l};r=e();return s=null,r}function e(e,r,...t){var l,n,[e,...s]=e.split("."),[e,i]=e.replace(/\s/g,"").split("#"),f=s.join(" "),a=document.createElement(e||"div"),s=(i&&(a.id=i),f&&(a.className=f),t=(k(r)?t:[r,...t]).flat(),Array.isArray(t)&&1===t.length?t[0]:t);r=k(r)?{children:s,...r}:{children:s};for([l,n]of Object.entries(r))if(l.startsWith("on")&&x(n,v))a.addEventListener(l.toLowerCase().slice(2),n);else if("class"===l)a.className=(f+" "+O(n,m,a,f)).trim();else if("style"===l&&x(n,y)&&null!==n)for(var[o,c]of Object.entries(n))a.style[o]=O(c,A,a,o);else if("children"===l)for(var[u,d]of w(O(n,h,a)).entries())a.append(O(d,b,a,u));else l in a?a[l]=O(n,g,a,l):a.setAttribute(l,O(n,j,a,l));return a}function r(r,e){return O(r,p,void 0,e),()=>{for(var e of C.keys())e.fn===r&&C.delete(e)}}function i(e){return e!==Object(e)||e[n]?e:new Proxy(e,{get(r,t){var e,l;return t===n||(e=Reflect.get(r,t),x(r,v)&&"prototype"===t?e:(s&&(C.has(s)||C.set(s,[]),(l=C.get(s))?.every(e=>!N(e,r,t)))&&l.push([r,t]),i(e)))},set(e,r,t){var l,n,s,i,f,a=Reflect.get(e,r),o=Reflect.set(e,r,t);for([{fn:l,at:n,el:s,x:i},f]of C.entries())for(var c of f)if(c[0]===a&&(c[0]=t),N(c,e,r))if(n===m)s.className=(i+" "+l()).trim();else if(n===A)s.style[i]=l();else if(n===g)s[i]=l();else if(n===j)s.setAttribute(i,l());else if(n===h){for(var u of C.keys())u.el&&s!==u.el&&s.contains(u.el)&&C.delete(u);s.replaceChildren(...w(l()))}else if(n===b){var d,y=s.children[i];for(d of C.keys())d.el&&(y===d.el||y.contains(d.el))&&C.delete(d);s.replaceChild(l(),y)}else n===p&&(i?i(l()):l());return o}})}var t=e=>!!e[n];export{C as deps,e as h,r as watch,i as reactive,t as isReactive};