let o=null,v=new Map;function l(e,t,r){if("function"!=typeof e)return e;o=[e,t,r];t=e();return o=null,t}function e(e,t,r){var s,o,n,f,i="object"==typeof t&&!Array.isArray(t),a=[e,{},[]];for([s,o]of Object.entries(i?t:{}))a[1][s]=s.startsWith("on")?o:l(o,a,s);for([n,f]of l(i?r??[]:t,a,"*").entries())a[2].push(l(f,a,"#"+n));return a}function m(e){if("string"==typeof e)return document.createTextNode(e);var t,r,s,o=document.createElement(e[0]);for([t,r]of Object.entries(e[1]))"class"===t?o.className=r:"for"===t?o.htmlFor=r:t.startsWith("on")?o.addEventListener(t.slice(2).toLowerCase(),r):t.startsWith("$")?o.style[t.slice(1)]=r:t.startsWith("_")?o.setAttribute(t.slice(1),r):o[t]=r;for(s of e[2])o.append(m(s));return e[3]=o}function t(e,t){document.querySelector(e).append(m(t))}function r(t,e){return l(t,e,""),()=>{for(var e of v.keys())e[0]===t&&v.delete(e)}}let n=Symbol("brand");function f(e){return e!==Object(e)||e[n]?e:new Proxy(e,{get(t,r){var e,s;return r===n||(e=Reflect.get(t,r),"function"==typeof t&&"prototype"===r?e:(o&&(v.has(o)||v.set(o,[]),(s=v.get(o))?.every(e=>!(e[0]===t&&e[1]===r)))&&s.push([t,r]),f(e)))},set(e,t,r){var s,o,n,f,i=Reflect.get(e,t),a=Reflect.set(e,t,r);for([[s,o,n],f]of v.entries())for(var l of f)if(l[0]===i&&(l[0]=r),l[0]===e&&l[1]===t)if("function"==typeof o||void 0===o)o?o(s()):s();else{var c=o[3];if("class"===n)c.className=s();else if("for"===n)c.htmlFor=s();else if(n.startsWith("$"))c.style[n.slice(1)]=s();else if(n.startsWith("_"))c.setAttribute(n.slice(1),s());else if(n.startsWith("#")){var u,p=c.children[n.slice(1)];for(u of v.keys()){var y=u[1]?.[3];y&&(p===y||p.contains(y))&&v.delete(u)}c.replaceChild(m(s()),p)}else if("*"===n){for(var d of v.keys()){var h=d[1]?.[3];h&&c!==h&&c.contains(h)&&v.delete(d)}c.replaceChildren(...s().map(m))}else c[n]=s()}return a}})}var s=e=>!!e[n];export{v as deps,e as h,t as mount,r as watch,f as reactive,s as isReactive};