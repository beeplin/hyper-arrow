let u="cacheChildren",a="__hyper_arrow__",o=Symbol(a),c={html:"http://www.w3.org/1999/xhtml",svg:"http://www.w3.org/2000/svg",mathml:"http://www.w3.org/1998/Math/MathML"},i=null,v=new Map;var e=new Proxy({},{get:(e,r)=>new Proxy({},{get:(e,t)=>n.bind(null,r+":"+t)})});let n=function(e,t,r){var[e,n]=e.split(":"),[e,n]=n?[e,n]:[n,"html"],o=[e,n,Object.create(null),[]];if("object"!=typeof t||Array.isArray(t))r=t;else for(var i in t)i.startsWith("on")?o[2][i.toLowerCase()]=t[i]:o[2][i]=s(t[i],o,i);var l,f=s(r,o,null)??[];for(l in f)o[3].push(p(s(f[l],o,+l)));return o};function p(e){return"string"==typeof e?["text",e,Object.create(null),[]]:e}function t(t,e){return s(t,null,null,e),()=>{for(var e of v.keys())e[0]===t&&v.delete(e)}}function s(e,t,r,n){if("function"!=typeof e)return e;i=t?[e,t,r]:[e,null,null,n];t=e();return i=null,t}function r(e,t){document.querySelector(e).append(l(t))}function l(e){let[t,r,n,o]=e;var i,l=document.createElementNS(c[t],r);for(i in(e[4]=l).setAttribute("uid",Math.random().toString().slice(2,4)),n)M(e,i,n[i]);l.append(...o.map(d));var f=h(o);return n[u]&&f&&(e[5]=f.reduce((e,t,r)=>({...e,[t]:o[r]}),{})),l[a]=e,n.oncreate?.(l),l}function d(e){return"text"===e[0]?(t=e,r=document.createTextNode(t[1]),(t[4]=r)[a]=t,r):l(e);var t,r}function h(e){var t=e.map(e=>e[2].id).filter(e=>"string"==typeof e);if(new Set(t).size!==t.length)throw new Error("duplicate child id");return t.length===e.length?t:null}let f=e=>!!e[o];function m(e){return e!==Object(e)||f(e)?e:new Proxy(e,{get(e,t){var r,n;return t===o||(r=Reflect.get(e,t),"function"==typeof e&&"prototype"===t?r:(i&&(v.has(i)||v.set(i,[]),(n=v.get(i)).some(e=>e[0]===e&&e[1]===t)||n.push([e,t])),m(r)))},set(e,t,r){var n=Reflect.get(e,t),o=Reflect.set(e,t,r);if(n!==r||"length"===t)for(var[i,l]of v.entries())for(var f of l)if(f[0]===n&&(f[0]=r),f[0]===e&&f[1]===t){var[f,u,a,c]=i,f=f();if(u)if(null===a){for(var s of u[3])w(s);g(u,f.map(p))}else"number"==typeof a?(w(u[3][a]),y(u,a,p(f))):_(u,a,f);else c?.(f)}return o}})}function w(e){for(var t of v.keys())!function t(e,r){if(!r)return!1;if(e===r)return!0;let n=e[3].some(e=>t(e,r));return n}(e,t[1])||v.delete(t)}function g(r,n){var t=h(r[3]),o=h(n);if(t&&o){for(let e=t.length-1;0<=e;e--)o.includes(t[e])||b(r,e);for(let[e,t]of o.entries()){var i=r[3].findIndex(e=>e[2].id===t),l=n[e];(e===i?y:r[3][i]?(x(r,e,b(r,i)),y):r[5]?.[t]?(x(r,e,r[5][t]),y):x)(r,e,l)}}else{var f=n.length,u=r[3].length;for(let e=0;e<f||e<u;e++)e<f&&e<u?y(r,e,n[e]):e>=u?x(r,e,n[e]):b(r,e)}}function y(e,r,n){var o=e[3][r];if("text"!==o[0]&&"text"!==n[0]&&o[1]===n[1]){let t=n[2];for(var i in t)_(o,i,t[i]);for(var l in o[2])if(!(l in t)){u=f=void 0;var f=o,u=l;delete f[2][u],f=f[4],"$"===u[0]?f.style.removeProperty(u.slice(1)):"_"===u[0]||u.toLowerCase()in f.attributes?f.removeAttribute(u.replace(/^_/,"")):f[u]=void 0}["innerText","innerHTML","textContent"].some(e=>e in t)||g(o,n[3]),n[4]=o[4],e[3][r]=n}else b(e,r),x(e,r,n)}function x(e,t,r){e[3].splice(t,0,r);var n=e[4],o=r[4]??d(r);n.insertBefore(o,n.childNodes.item(t)),e[5]&&r[2].id&&(e[5][r[2].id]=r)}function b(e,t){e=e[3].splice(t,1)[0];return e[4].remove(),e}function _(e,t,r){e[2][t]!==r&&M(e,t,r)}function M(e,t,r){e[2][t]=r;e=e[4];"$"===(t="class"!==t&&"for"!==t?t:"_"+t)[0]?e.style.setProperty(t.slice(1),r):"_"===t[0]?e.setAttribute(t.slice(1),r):e[t]=r}export{v as deps,e as tags,n as h,t as watch,r as mount,f as isReactive,m as reactive};